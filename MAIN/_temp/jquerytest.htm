<link rel="stylesheet" href="ie-9.css" type="text/css" />
<link rel="stylesheet" href="css.css" type="text/css" />

<script type="text/javascript" src="jquery-1.11.0.min.js"></script>
<script type="text/javascript">
var datArr={"rd":["T","A","C","K"],"bl":[],"dish":["S"]};
function pointed(){return'rd'}
var red_is_left=true;

function setStack(limit)//スタックをdatArrの通りにする
{
	var i,j="";
	var tmp=""
	var lg="";//ログ用
	for(i in datArr)
	{
		if( (limit!=null) && (limit!=i) )continue;
		for(j in datArr[i])
		{
			 tmp+='<div class="koo" id="'+i+'_'+j+'">'+datArr[i][j]+'</div>';
		}
		document.getElementById(i).innerHTML=tmp;
		tmp="";
	}
}

function POP()
{
	;(function($){$(function(){
		document.getElementById(pointed()+"_0").style.visibility="hidden";
		document.getElementById("chaos").innerHTML+=
			'<div class="koo" id="mino" style="position:absolute;width:108px;left:55px;top:80px">'+
			datArr[pointed()][0]+
			'</div>';
		datArr.dish[0]=datArr[pointed()].shift();
		setStack(pointed());
		
		$("#mino").animate({top:'45px'},500).animate({left:'+=300px'},500).animate({top:'165px'},500);
		setTimeout(function(){setStack();$('#mino').remove();},1600);		
	})})(jQuery);
}

function PUSH()//fixme
{
	;(function($){$(function(){
		document.getElementById("chaos").innerHTML+=
			'<div class="koo" id="mino" style="position:absolute;width:108px;left:355px;top:165px">'+
			datArr.dish[0]+
			'</div>';
		datArr[pointed()].unshift(datArr.dish[0]);//皿から貰う
		setStack("dish");
		
		$("#mino").animate({top:'45px'},500).animate({left:'-=300px'},500).animate({top:'65px'},250);
		setTimeout(function(){setStack();$('#mino').remove();},1350);		
	})})(jQuery);
}


function MOV()//一つ動かす
{
	;(function($){$(function(){
		document.getElementById(pointed()+"_0").style.visibility="hidden";
		document.getElementById("chaos").innerHTML+=
			'<div class="koo" id="mino" style="position:absolute;width:108px;left:55px;top:80px">'+
			datArr[pointed()][0]+
			'</div>';
		datArr[red_is_left?"bl":"rd"].unshift(datArr[pointed()].shift());//一つ動かす
		setStack(pointed());
		
		$("#mino").animate({top:'45px'},500).animate({left:'+=150px'},500).animate({top:'65px'},500);
		setTimeout(function(){setStack();$('#mino').remove();},1350);		
	})})(jQuery);
	
	
}
</script>
<body onload="setStack()">
<div class="waku" id="chaos">
	<div class="stac st1" id="rd"></div>
	<div class="stac st2" id="bl"></div>
	<div class="dish" id="dish"></div>
	<div class="arrow"></div>
</div>
<input type="button" onclick="POP();" value="pop"/>
<input type="button" onclick="PUSH();" value="push"/>
<input type="button" onclick="MOV();" value="mov"/>
</body>
